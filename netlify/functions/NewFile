// /netlify/functions/getRxCui.js

const fetch = require("node-fetch");

exports.handler = async function (event, context) {
	const ndc = event.queryStringParameters.ndc;

	if (!ndc) {
		return {
			statusCode: 400,
			body: JSON.stringify({ error: "Missing NDC parameter" }),
		};
	}

	try {
		const response = await fetch(`https://rxnav.nlm.nih.gov/REST/rxcui.json?id=${ndc}&idtype=NDC`);
		const data = await response.json();
		return {
			statusCode: 200,
			body: JSON.stringify(data),
		};
	} catch (error) {
		console.error("Error fetching RxCUI:", error);
		return {
			statusCode: 500,
			body: JSON.stringify({ error: "Internal Server Error" }),
		};
	}
};
